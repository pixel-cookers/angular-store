(function(){"use strict";angular.module("store.fileSystem.adapterCache",["restangular"]).factory("FileSystemAdapterCache",function(){var a,b,c,d,e;return a=null,d=function(){return a=Math.random()},b=function(){return a},c=function(){return{v:a}},e=function(){return d(),a},d(),{get:b,getAsParam:c,pop:e}})}).call(this),function(){"use strict";angular.module("store.fileSystem.restangular",["restangular"]).factory("FileSystemAdapterRestangular",function(a){return a.withConfig(function(a){return a.setBaseUrl("http://localhost:9000/filesystem"),a.setRequestSuffix(".json"),a.setDefaultHttpFields({cache:!0}),a.setResponseExtractor(function(a,b,c){var d,e;return d=a||{},"getList"===b&&a&&a[c]&&(d=a[c]),"get"===b&&(e=pluralize(c,1),a&&a[e]&&(d=a[e])),d})})})}.call(this),function(){"use strict";angular.module("store.fileSystem",["store.fileSystem.core","store.fileSystem.restangular"]),angular.module("store.fileSystem.core",["store.fileSystem.restangular","store.fileSystem.adapterCache","ngCordova.plugins.file","store.core.sanitizeRestangularOne"]).value("FileSystemAdapterMapping",[]).factory("FileSystemAdapterWriteDirectory",function(){return angular.isUndefined(window.cordova)?"":cordova.file.documentsDirectory?cordova.file.documentsDirectory:cordova.file.externalApplicationStorageDirectory}).factory("FileSystemAdapter",function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;return l=function(b,c){return a.$emit("store.file_system.not_found",c),"not_found"},p=function(a,b){var d,e,f,h;return d=c.defer(),h=[],b?g.all(pluralize(a)).all(b).getList(j.getAsParam()).then(f=function(b){return d.resolve(n(b,a))},e=function(b){return d.reject(l(b,a))}):g.all(pluralize(a)).getList(j.getAsParam()).then(f=function(b){return d.resolve(n(b,a))},e=function(b){return d.reject(l(b,a))}),d.promise},t=function(a,b){var d;return d=c.defer(),g.all(pluralize(a)).getList(j.getAsParam()).then(function(a){return a=_.filter(a,b),a?d.resolve(a):d.reject("not_found")},function(b){return d.reject(l(b,a))}),d.promise},r=function(a,d){var e,f,h;return e=c.defer(),f=null,console.debug("findById 2"),h=g.all(pluralize(a)).getRestangularUrl()+".json",console.debug("url to call",h),b().get(h).success(function(b){return console.debug("success",b),f=_.find(b[pluralize(a)],{id:d}),f?e.resolve(f):e.reject("not_found"),null}).error(function(a,b){return console.error("error",a,b)}),e.promise},s=function(a,b){var d,e,f;return e=_.str.classify(a)+"Model",d=c.defer(),f=[],g.all(pluralize(a)).getList(j.getAsParam()).then(function(a){return a=_.where(a,function(a){return _.contains(b,a.id)}),d.resolve(a)},function(b){return d.reject(l(b,a))}),d.promise},u=function(a,b){var d,e,g,i,j;e=c.defer(),i={};for(j in f(a))_.include(j,"_ids")&&(d=!0,g=pluralize(j.replace("_ids","")),"stakes"===g&&"reference"===b&&(a[g]=n(a[g],"stake"),d=!1),angular.forEach(h,function(b){return g===b.from?(i[g]=s(b.to,a[j]),d=!1):void 0}),d&&(i[g]=s(j.replace("_ids",""),a[j])));return c.all(i).then(function(b){var c;for(c in b)a[c]=n(b[c],pluralize(c,1));return e.resolve(a)}),e.promise},q=function(a,b,d){var e;return e=c.defer(),g.all(pluralize(a)).getList(j.getAsParam()).then(function(a){var c;return c=d instanceof Array?_.find(a,function(a){return _.isEqual(a[b],d)}):_.find(a,function(a){return a[b]===d}),c?e.resolve(c):e.reject("not_found")},function(b){return e.reject(l(b,a))}),e.promise},m=function(a,b,d){var e,f;return e=c.defer(),p(a).then(f=function(c){var f,g,h;return f=!1,g=n(c,a),c.length>0?(_.remove(g,function(a){var c;if(d){if(Array.isArray(d)&&(c=!1,angular.forEach(d,function(d){return b[d]!==a[d]?c=!1:void 0}),!c))return f=!0,!0}else if(angular.isDefined(a.id)&&(null!=b?b.id:void 0)===a.id)return f=!0,!0;return!1}),f?v(a,g).then(h=function(){return e.resolve(!0)}):e.resolve(!1)):void 0}),e.promise},w=function(a,b,d){var e,f,g;return e=c.defer(),p(a).then(g=function(c){var f,g,h;return f=!1,g=n(c,a),c.length>0&&angular.forEach(c,function(a,c){var e;if(d){if(Array.isArray(d)&&(e=!1,angular.forEach(d,function(c){return b[c]!==a[c]?e=!1:void 0}),!e))return f=!0,g[c]=b}else if(angular.isDefined(a.id)&&(null!=b?b.id:void 0)===a.id)return g[c]=b,f=!0}),f||g.push(b),v(b.type,g).then(h=function(){return e.resolve(b)})},f=function(){var a;return v(b.type,[b]).then(a=function(){return e.resolve(b)})}),e.promise},v=function(a,b){var d,f,g,h;return d=c.defer(),g=pluralize(a),h={append:!1},f={},f[g]=x(b),f=JSON.stringify(f),resolveLocalFileSystemURL(i,function(a){return a.getDirectory("resources",{create:!0},function(a){var c,i,k,l;return l=a.fullPath.substring(1),k=""+l+g+".json",e.writeFile(k,f,h).then(i=function(){return j.pop(),d.resolve(b)},c=function(a){return console.error("could_not_write_file",a),d.reject("could_not_write_file")})},function(a){return console.error("could_not_open_resource_directory",a),d.reject("could_not_open_resource_directory")})},function(a){return console.error("could_not_open_directory",a),d.reject("could_not_open_directory")}),d.promise},x=function(a){return Array.isArray(a)?_.map(a,function(a){return y(a)}):y(a)},y=function(a){var b,c,d;for(b in a)d=a[b],angular.isFunction(d)?delete a[b]:(c=_.str.underscored(b),a[c]=d,b!==c&&delete a[b]);return a},n=function(a,b){var c;return Array.isArray(a)?c=_.map(a,function(a){return o(a,b)}):o(a,b)},o=function(a,b){var c,e;return e=_.str.classify(b)+"Model",d.has(e)?new(c=d.get(e))(a,b):(console.error("Invalid model",e,"for type:",b),a)},k=function(){function a(){}return a.prototype.findAll=function(a,b){return p(a,b)},a.prototype.findQuery=function(a,b){return t(a,b)},a.prototype.findByIds=function(a,b){return s(a,b)},a.prototype.findById=function(a,b){return r(a,b)},a.prototype.findBy=function(a,b,c){return q(a,b,c)},a.prototype.deleteRecord=function(a,b,c){return m(a,b,c)},a.prototype.saveRecord=function(a,b,c){return w(a,b,c)},a.prototype.save=function(a,b){return v(a,b)},a}()})}.call(this),function(){"use strict";angular.module("store.localForage",["store.core","LocalForageModule"]).config(function(a){return a.config({name:"archeage_tools",storeName:"archeage_tools"})}).factory("LocalForageAdapter",function(a,b){var c,d,e,f,g,h,i,j,k;return f=function(a){return b.getItem(a)},j=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var b;return b=_.filter(a,d),b?e.resolve(b):e.reject("not_found")}),e.promise},i=function(b,c){var d,e;return d=a.defer(),e=[],_.each(c,function(a){return e.push(h(b,a))}),a.all(e).then(function(a){return d.resolve(a)}),d.promise},g=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var b;return b=_.find(a,d),b?e.resolve(b):e.reject("not_found")}),e.promise},h=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var b;return b=_.find(a,{id:d}),b?e.resolve(b):e.reject("not_found")}),e.promise},d=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var f;return a||(a=[]),f=a[a.length-1],d.id=f?f.id+1:1,a.push(d),b.setItem(c,a).then(function(){return e.resolve(d)})}),e.promise},e=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var f;return f=_.filter(a,function(a){return a.id!==d.id}),b.setItem(c,f).then(function(){return e.resolve()})}),e.promise},k=function(c,e){var f;return f=a.defer(),e.id?(b.getItem(c).then(function(a){return a=_.map(a,function(a){return a.id===e.id?e:a}),b.setItem(c,a).then(function(){return f.resolve(e)})}),f.promise):d(c,e)},c=function(){function a(){}return a.prototype.findAll=function(a){return f(a)},a.prototype.findQuery=function(a,b){return j(a,b)},a.prototype.findByIds=function(a,b){return i(a,b)},a.prototype.findById=function(a,b){return h(a,b)},a.prototype.findBy=function(a,b){return g(a,b)},a.prototype.createRecord=function(a,b){return d(a,b)},a.prototype.deleteRecord=function(a,b){return e(a,b)},a.prototype.saveRecord=function(a,b){return k(a,b)},a}()})}.call(this),function(){"use strict";angular.module("store.rest.restangular",["restangular"]).factory("RESTAdapterRestangular",function(a){return a.withConfig(function(a){return a.setBaseUrl("http://localhost:3000"),a.setDefaultHttpFields({cache:!0}),a.setResponseExtractor(function(a,b,c,d,e){var f,g;return f=a||{},"getList"===b&&a&&a[c]&&(f=a[c]),"get"===b&&(g=pluralize(c,1),a&&a[g]&&(f=a[g])),f.originalResponse=e.data,f})})})}.call(this),function(){"use strict";angular.module("store.rest",["store.rest.core","store.rest.restangular"]),angular.module("store.rest.core",["store.rest.restangular","store.core.sanitizeRestangularOne"]).factory("RESTAdapter",function(a,b,c,d){var e,f,g,h,i,j,k;return h=function(d,e){var f,g,h,i,j;return f=b.defer(),i=_.str.classify(d)+"Model",a.has(i)?(h=a.get(i),e?c.all(pluralize(d)).all(e).getList().then(j=function(a){return a=_.map(a,function(a){return new h(a,d)}),f.resolve(a)},g=function(a){return f.reject(a)}):c.all(pluralize(d)).getList().then(j=function(a){return a=_.map(a,function(a){return new h(a,d)}),f.resolve(a)},g=function(a){return f.reject(a)})):(console.error("Invalid model",i),f.reject("invalid_model")),f.promise},j=function(a,b){return c.all(pluralize(a)).getList(b)},k=function(c){var e,f,g,h,i,j,k,l;e=b.defer(),i={};for(j in d(c))_.include(j,"_ids")&&c.originalResponse&&(l=j.replace("_ids",""),h=pluralize(l),c.originalResponse[h]&&(g=_.str.classify(l)+"Model",a.has(g)&&(f=a.get(g),k=_.map(c.originalResponse[h],function(a){return new f(a,l)}),c[h]=k)));return e.resolve(c),e.promise},i=function(a,d){var e,f,g;return e=b.defer(),c.one(pluralize(a),d).get().then(g=function(b){return b?k(b,a).then(function(a){return e.resolve(a)}):e.reject("not_found")},f=function(a){return e.reject(a)}),e.promise},f=function(a,b){return console.error("createRecord",a,b)},g=function(a,b){return console.error("deleteRecord",a,b)},e=function(){function a(){}return a.prototype.findAll=function(a,b){return h(a,b)},a.prototype.findByIds=function(a,b){return findByIds(a,b)},a.prototype.findById=function(a,b){return i(a,b)},a.prototype.findQuery=function(a,b){return j(a,b)},a.prototype.createRecord=function(a,b){return f(a,b)},a.prototype.deleteRecord=function(a,b){return g(a,b)},a}()})}.call(this),function(){"use strict";angular.module("store.core.sanitizeRestangularOne",[]).factory("sanitizeRestangularOne",function(){return function(a){return _.omit(a,"route","parentResource","getList","get","post","put","remove","head","trace","options","patch","$then","$resolved","restangularCollection","customOperation","customGET","customPOST","customPUT","customDELETE","customGETLIST","$getList","$resolved","restangularCollection","one","all","doGET","doPOST","doPUT","doDELETE","doGETLIST","addRestangularMethod","getRestangularUrl","several","getRequestedUrl","clone","reqParams","withHttpConfig","oneUrl","allUrl","getParentList","save","fromServer","plain","singleOne")}})}.call(this),function(){"use strict";angular.module("store",["store.core","store.localForage","store.rest","store.fileSystem"]),angular.module("store.core",[]).provider("Store",function(){var a,b;a={adapterName:"RESTAdapter"},b=function(c,d,e){var f,g,h;return f=null,c.has(e.adapterName)||console.error("invalid_adapter"),g=c.get(e.adapterName),f=new g,h={},h.withConfig=function(e){var f;return f=angular.copy(_.extend(a,e)),b(c,d,f)},h["new"]=function(a,b){var e,f,g;return e=d.defer(),g=_.str.classify(a)+"Model",c.has(g)?(f=c.get(g),e.resolve(new f(b,a))):(console.error("Invalid model",g),e.reject("invalid_model")),e.promise},h.getAdapter=function(){return f},h.find=function(a,b){return"string"!=typeof b||b.match(/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/)?1===arguments.length?this.findAll(a):"object"==typeof b?this.findQuery(a,b):(b=parseInt(b,10)||b,this.findById(a,b)):this.findAll(a,b)},h.findAll=function(a,b){return f.findAll(a,b)},h.findQuery=function(a,b){var e,g,h;return e=d.defer(),h=_.str.classify(a)+"Model",c.has(h)?(g=c.get(h),f.findQuery(a,b).then(function(b){return b=_.map(b,function(b){return new g(b,a)}),e.resolve(b)})):(console.error("Invalid model",h),e.reject("invalid_model")),e.promise},h.findByIds=function(a,b){var e,g,h;return e=d.defer(),b||console.error("ids parameter required"),h=_.str.classify(a)+"Model",c.has(h)?(g=c.get(h),f.findByIds(a,b).then(function(a){return e.resolve(a)},function(a){return e.reject(a)})):(console.error("Invalid model",h),e.reject("invalid_model")),e.promise},h.findBy=function(a,b,e){var g;return g=d.defer(),f.findBy(a,b,e).then(function(b){var d,e;return e=_.str.classify(a)+"Model",c.has(e)?(d=c.get(e),b=new d(b,a),g.resolve(b)):(console.error("Invalid model",e),g.reject("invalid_model"))},function(a){return g.reject(a)}),g.promise},h.findById=function(a,b){var e;return b||console.error("id parameter required"),e=d.defer(),f.findById(a,b).then(function(b){var d,f;return f=_.str.classify(a)+"Model",c.has(f)?(d=c.get(f),b=new d(b,a),e.resolve(b)):(console.error("Invalid model",f),e.reject("invalid_model"))},function(a){return e.reject(a)}),e.promise},h.createRecord=function(a,b){return f.createRecord(a,b)},h.deleteRecord=function(a,b){return f.deleteRecord(a.type,a,b)},h.saveRecord=function(a,b){return f.saveRecord(a.type,a,b)},h.save=function(a,b){return f.save(a,b)},h},this.$get=function(c,d){return b(c,d,a)}})}.call(this);